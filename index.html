<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Botpress TTS Assistant</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      height: 100vh;
    }
    #botpress-chat {
      flex: 1;
    }
  </style>
</head>
<body>

  <div id="botpress-chat"></div>

  <script src="https://cdn.botpress.cloud/webchat/v1/inject.js"></script>
  <script>
    window.botpressWebChat.init({
      botId: '31f65dff-0aa9-4f3a-b568-5ed1859402e9',
      hostUrl: 'https://cdn.botpress.cloud/webchat/v1',
      messagingUrl: 'https://messaging.botpress.cloud',
      containerId: 'botpress-chat',
      hideWidget: false,
      showCloseButton: true
    });

    // Speak bot responses using Web Speech API
    window.addEventListener('message', function(event) {
      if (event.data.type === 'webchat:bot_response') {
        const text = event.data.payload.text;
        if (text) {
          const utterance = new SpeechSynthesisUtterance(text);
          const voices = speechSynthesis.getVoices();
          utterance.voice = voices.find(v =>
            v.lang === 'en-US' && (v.name.includes('Aria') || v.name.includes('Google'))
          );
          speechSynthesis.speak(utterance);
        }
      }
    });
  </script>

</body>
</html>
